# 更新日志

本文件记录项目的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.0.0] - 2026-02-06

### 新增
- 初始版本发布
- 鼠标拖拽屏幕区域选择
- 录制控制（开始、暂停、恢复、停止）
- 实时录制计时器
- FFmpeg 集成用于 H.264 编码
- 分辨率预设（720p、1080p）
- 输出目录选择
- 设置持久化
- 深色/浅色主题支持（跟随系统）
- Fluent 2 设计风格界面
- 跨平台支持（Windows、macOS、Linux）
- 自动 WebM 到 MP4 转换
- 最小选区大小验证（100x100 像素）
- 录制时的视觉反馈
- 视频处理进度指示器
- 基于时间戳的文件命名
- 多语言支持（中文和英文）
- 简化模式，录制时最小化界面
- 带键盘快捷键的菜单栏

### 修复
- **录制区域裁剪**: 视频现在正确录制选定区域而不是整个屏幕
  - 实现 FFmpeg crop 滤镜以准确裁剪视频到选定边界
  - 添加正确的边界参数传递通过录制管道
- **打包应用中的 FFmpeg 路径解析**: 修复生产构建中的 "spawn ffmpeg.exe ENOENT" 错误
  - 实现 FFmpeg 二进制文件位置的多路径回退机制
  - 为 ASAR 打包应用添加正确的资源路径解析
  - 延迟 require('ffmpeg-static') 仅在开发模式下加载
- **语言切换崩溃**: 修复在菜单中更改语言时应用退出的问题
  - 移除有问题的 Menu.setApplicationMenu(null) 调用
  - 添加窗口状态验证 !mainWindow.isDestroyed()
  - 改进菜单更新逻辑以防止崩溃
- **录制边框可见性**: 修复输出视频中出现边框的问题
  - 选择器窗口现在在活动录制期间隐藏
  - 边框仅在暂停或选择区域时显示
- **简化模式尺寸**: 修复窗口高度一致性
  - 将简化模式高度从 600 调整为 680 像素以匹配主窗口
  - 确保正常和简化模式下的正确窗口尺寸
- **代码质量**: 移除 stop-recording 处理程序中的重复 return 语句

### 技术细节
- Electron 28.x 框架
- 通过 ffmpeg-static 捆绑 FFmpeg
- H.264 视频编码，30fps
- CRF 23 质量设置
- 安全的 IPC 通信
- 应用资源的 ASAR 打包
- 多语言支持的 i18n 系统
- 基于语言选择的动态菜单生成

### 已知限制
- 音频录制 UI 存在但尚未实现功能
- 首次录制可能较慢，因为需要初始化 FFmpeg

## [未发布]

### 计划功能
- 音频录制（系统音频和麦克风）
- 快捷键支持快速录制
- 录制预览窗口
- 视频修剪/编辑
- 多显示器支持
- 自定义帧率选择
- 摄像头叠加
- 标注工具
- 云上传集成
- 录制历史/库

### 计划改进
- 直接区域捕获（无需全屏录制）
- 硬件加速支持
- 减少内存使用
- GPU 支持更快编码
- 自定义输出格式选择
- 比特率自定义
- 高级 FFmpeg 选项

---

## 版本历史

### 版本编号
- **主版本.次版本.修订版本**（例如：1.0.0）
- **主版本**: 重大更改或主要新功能
- **次版本**: 新功能，向后兼容
- **修订版本**: 错误修复，小改进

### 发布类型
- **稳定版**: 生产就绪版本（1.0.0、1.1.0 等）
- **测试版**: 功能完整但需要测试（1.0.0-beta.1）
- **预览版**: 早期开发版本（1.0.0-alpha.1）

---

## 如何更新

### 用户
1. 从发布页面下载最新版本
2. 安装覆盖现有版本（设置将保留）
3. 或使用内置自动更新程序（如果启用）

### 开发者
1. 拉取最新更改：`git pull`
2. 更新依赖：`npm install`
3. 重新构建：`npm run build`

---

## 支持

如有问题、功能请求或疑问：
- GitHub Issues: https://github.com/yourusername/screen-recorder/issues
- 电子邮件: support@screenrecorder.app
- 文档: 参见 README.md 和其他文档
